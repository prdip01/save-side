<!e addEventListener('click', () => showScreen('decode'));
            backBtn.addEventListener('click', showChoiceScreen);


            // --- Cipher Logic ---
            const cipherMap = {
    'a': '2f3', 'b': '4g7', 'c': '6h1', 'd': '8j9', 'e': '3k4', 'f': '5m2', 'g': '7n0', 'h': '9p5', 'i': '1r8', 'j': '0s6', 'k': '2t1', 'l': '4v3', 'm': '6x5',
    'n': '8z7', 'o': '3b9', 'p': '5c0', 'q': '7d2', 'r': '9e4', 's': '1f6', 't': '0g8', 'u': '2h0', 'v': '4j1', 'w': '6k3', 'x': '8m5', 'y': '3n7', 'z': '5p9',
    'A': '7r0', 'B': '9s2', 'C': '1t4', 'D': '0v6', 'E': '2x8', 'F': '4z1', 'G': '6b3', 'H': '8c5', 'I': '3d7', 'J': '5f9', 'K': '7g0', 'L': '9h2', 'M': '1j4',
    'N': '0k6', 'O': '2m8', 'P': '4n1', 'Q': '6p3', 'R': '8r5', 'S': '3s7', 'T': '5t9', 'U': '7v0', 'V': '9x2', 'W': '1z4', 'X': '0b6', 'Y': '2c8', 'Z': '4d1',
    '0': '6f3', '1': '8g5', '2': '3h7', '3': '5j9', '4': '7k0', '5': '9m2', '6': '1n4', '7': '0p6', '8': '2r8', '9': '4s0',
    ' ': '6t1', '.': '8v3', ',': '3x5', '!': '5z7', '?': '7b9', "'": '9c0', '"': '1d2', '\n': '0e4'
};
            const reverseCipherMap = Object.fromEntries(Object.entries(cipherMap).map(([key, value]) => [value, key]));

            function encodeMessage(message) {
                let encoded = '';
                for (const char of message) {
                    encoded += (cipherMap[char] || char) + ' ';
                }
                return encoded.trim();
            }

            function decodeMessage(encodedMessage) {
                const codes = encodedMessage.split(' ');
                let decoded = '';
                for (const code of codes) {
                    decoded += reverseCipherMap[code] || code;
                }
                return decoded;
            }

            // --- Event Listeners ---
            encodeBtn.addEventListener('click', () => {
                const message = encodeInput.value;
                if (!message) {
                    encodeOutput.textContent = 'Please enter a message to encode.';
                    shareContainer.classList.add('hidden');
                    return;
                }
                const encoded = encodeMessage(message);
                encodeOutput.textContent = encoded;
                shareContainer.classList.remove('hidden');
                
                const whatsappUrl = `https://api.whatsapp.com/send?text=${encodeURIComponent(encoded)}`;
                whatsappShareBtn.href = whatsappUrl;
            });

            decodeBtn.addEventListener('click', () => {
                const encodedMessage = decodeInput.value;
                if (!encodedMessage) {
                    decodeOutput.textContent = 'Please enter a code to decode.';
                    return;
                }
                const decoded = decodeMessage(encodedMessage);
                decodeOutput.textContent = decoded;
            });
            
            const showCopyFeedback = (message) => {
                copyFeedback.textContent = message;
                setTimeout(() => {
                    copyFeedback.textContent = '';
                }, 2500);
            };

            const copyToClipboard = () => {
                 const textToCopy = encodeOutput.textContent;
                if (!textToCopy) return;

                const tempTextArea = document.createElement('textarea');
                tempTextArea.value = textToCopy;
                document.body.appendChild(tempTextArea);
                tempTextArea.select();
                try {
                    document.execCommand('copy');
                    showCopyFeedback('Copied to clipboard!');
                } catch (err) {
                    console.error('Failed to copy: ', err);
                    showCopyFeedback('Failed to copy.');
                }
                document.body.removeChild(tempTextArea);
            };

            copyBtn.addEventListener('click', copyToClipboard);
            
            instagramShareBtn.addEventListener('click', () => {
                copyToClipboard();
                showCopyFeedback('Copied! Now paste it in Instagram.');
            });
        });
    </script>
</body>
</html>
